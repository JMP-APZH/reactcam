{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\nimport { useEffect, useRef, UseRef, useState } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction App() {\n  var cameraRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasCameraPermission = _useState2[0],\n      setHasCameraPermission = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasMediaLibraryPermission = _useState4[0],\n      setHasMediaLibraryPermission = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photo = _useState6[0],\n      setPhoto = _useState6[1];\n\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraPermission = yield Camera.requestCameraPermissionsAsync();\n      var mediaLibraryPermission = yield MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return _jsx(Text, {\n      children: \"Requesting permissions...\"\n    });\n  } else if (!hasCameraPermission) {\n    return _jsx(Text, {\n      children: \"Permission for camera not granted. Please change this in settings.\"\n    });\n  }\n\n  var takePic = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var options = {\n        quality: 1,\n        base64: true,\n        exif: false\n      };\n      var newPhoto = yield cameraRef.current.takePictureAsync(options);\n      setPhoto(newPhoto);\n    });\n\n    return function takePic() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  if (photo) {\n    var sharePic = function sharePic() {\n      shareAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    var savePhoto = function savePhoto() {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsx(Image, {\n        style: styles.preview,\n        source: {\n          uri: \"data:image/jpg;base64\" + photo.base64\n        }\n      }), _jsx(Button, {\n        title: \"Share\",\n        onPress: sharePic\n      }), hasMediaLibraryPermission ? _jsx(Button, {\n        title: \"Save\",\n        onPress: savePhoto\n      }) : undefined, _jsx(Button, {\n        title: \"Discard\",\n        onPress: function onPress() {\n          return setPhoto(undefined);\n        }\n      })]\n    });\n  }\n\n  return _jsxs(Camera, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.buttonContainer,\n      children: _jsx(Button, {\n        title: \"Take Picture\",\n        onPress: takePic\n      })\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    })]\n  });\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});\nexport default App;","map":{"version":3,"names":["StatusBar","Camera","shareAsync","MediaLibrary","useEffect","useRef","UseRef","useState","App","cameraRef","hasCameraPermission","setHasCameraPermission","hasMediaLibraryPermission","setHasMediaLibraryPermission","photo","setPhoto","cameraPermission","requestCameraPermissionsAsync","mediaLibraryPermission","requestPermissionsAsync","status","undefined","takePic","options","quality","base64","exif","newPhoto","current","takePictureAsync","sharePic","uri","then","savePhoto","saveToLibraryAsync","styles","container","preview","buttonContainer","StyleSheet","create","flex","alignItems","justifyContent","backgroundColor","alignSelf"],"sources":["C:/Projects/ReactCam/reactcam/src/App.js"],"sourcesContent":["// import { StatusBar } from 'react-native';\nimport { StatusBar } from 'expo-status-bar';\nimport { StyleSheet, Text, View, SafeAreaView, Button, Image } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\n\nimport { useEffect, useRef, UseRef, useState } from 'react';\n\n// import logo from './logo.svg';\n// import './App.css';\n\nfunction App() {\n\n  let cameraRef = useRef();\n  const [hasCameraPermission, setHasCameraPermission] = useState();\n  const [hasMediaLibraryPermission, setHasMediaLibraryPermission] = useState();\n  const [photo, setPhoto] = useState();\n\n  useEffect(() => {\n    (async () => {\n      const cameraPermission = await Camera.requestCameraPermissionsAsync();\n      // const mediaLibraryPermission = await MediaLibrary.requestMediaLibraryPermissionsAsync();\n      const mediaLibraryPermission = await MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return <Text>Requesting permissions...</Text>\n  } else if (!hasCameraPermission) {\n    return <Text>Permission for camera not granted. Please change this in settings.</Text>\n  }\n\n  let takePic = async () => {\n    let options = {\n      quality: 1,\n      base64: true,\n      exif: false\n    };\n    let newPhoto = await cameraRef.current.takePictureAsync(options);\n    setPhoto(newPhoto);\n  };\n\n  if (photo) {\n    let sharePic = () => {\n      shareAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    let savePhoto = () => {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    return (\n      <SafeAreaView style={styles.container}>\n        <Image style={styles.preview} source={{ uri: \"data:image/jpg;base64\" + photo.base64 }} />\n        <Button title=\"Share\" onPress={sharePic} />\n        {hasMediaLibraryPermission ? <Button title=\"Save\" onPress={savePhoto} /> : undefined}\n        <Button title=\"Discard\" onPress={() => setPhoto(undefined)} />\n      </SafeAreaView>\n    );\n  }\n  \n\n  return (\n    <Camera \n      style={styles.container}\n    >\n\n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Take Picture\"\n          onPress={takePic}\n        />\n      </View>\n      <StatusBar style=\"auto\" />\n\n    </Camera>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});\n\nexport default App;\n"],"mappings":";;AACA,SAASA,SAAT,QAA0B,iBAA1B;;;;;;;AAEA,SAASC,MAAT,QAAuB,aAAvB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,KAAKC,YAAZ,MAA8B,oBAA9B;AAEA,SAASC,SAAT,EAAoBC,MAApB,EAA4BC,MAA5B,EAAoCC,QAApC,QAAoD,OAApD;;;;AAKA,SAASC,GAAT,GAAe;EAEb,IAAIC,SAAS,GAAGJ,MAAM,EAAtB;;EACA,gBAAsDE,QAAQ,EAA9D;EAAA;EAAA,IAAOG,mBAAP;EAAA,IAA4BC,sBAA5B;;EACA,iBAAkEJ,QAAQ,EAA1E;EAAA;EAAA,IAAOK,yBAAP;EAAA,IAAkCC,4BAAlC;;EACA,iBAA0BN,QAAQ,EAAlC;EAAA;EAAA,IAAOO,KAAP;EAAA,IAAcC,QAAd;;EAEAX,SAAS,CAAC,YAAM;IACd,kBAAC,aAAY;MACX,IAAMY,gBAAgB,SAASf,MAAM,CAACgB,6BAAP,EAA/B;MAEA,IAAMC,sBAAsB,SAASf,YAAY,CAACgB,uBAAb,EAArC;MACAR,sBAAsB,CAACK,gBAAgB,CAACI,MAAjB,KAA4B,SAA7B,CAAtB;MACAP,4BAA4B,CAACK,sBAAsB,CAACE,MAAvB,KAAkC,SAAnC,CAA5B;IACD,CAND;EAOD,CARQ,EAQN,EARM,CAAT;;EAUA,IAAIV,mBAAmB,KAAKW,SAA5B,EAAuC;IACrC,OAAO,KAAC,IAAD;MAAA;IAAA,EAAP;EACD,CAFD,MAEO,IAAI,CAACX,mBAAL,EAA0B;IAC/B,OAAO,KAAC,IAAD;MAAA;IAAA,EAAP;EACD;;EAED,IAAIY,OAAO;IAAA,8BAAG,aAAY;MACxB,IAAIC,OAAO,GAAG;QACZC,OAAO,EAAE,CADG;QAEZC,MAAM,EAAE,IAFI;QAGZC,IAAI,EAAE;MAHM,CAAd;MAKA,IAAIC,QAAQ,SAASlB,SAAS,CAACmB,OAAV,CAAkBC,gBAAlB,CAAmCN,OAAnC,CAArB;MACAR,QAAQ,CAACY,QAAD,CAAR;IACD,CARU;;IAAA,gBAAPL,OAAO;MAAA;IAAA;EAAA,GAAX;;EAUA,IAAIR,KAAJ,EAAW;IACT,IAAIgB,QAAQ,GAAG,SAAXA,QAAW,GAAM;MACnB5B,UAAU,CAACY,KAAK,CAACiB,GAAP,CAAV,CAAsBC,IAAtB,CAA2B,YAAM;QAC/BjB,QAAQ,CAACM,SAAD,CAAR;MACD,CAFD;IAGD,CAJD;;IAMA,IAAIY,SAAS,GAAG,SAAZA,SAAY,GAAM;MACpB9B,YAAY,CAAC+B,kBAAb,CAAgCpB,KAAK,CAACiB,GAAtC,EAA2CC,IAA3C,CAAgD,YAAM;QACpDjB,QAAQ,CAACM,SAAD,CAAR;MACD,CAFD;IAGD,CAJD;;IAMA,OACE,MAAC,YAAD;MAAc,KAAK,EAAEc,MAAM,CAACC,SAA5B;MAAA,WACE,KAAC,KAAD;QAAO,KAAK,EAAED,MAAM,CAACE,OAArB;QAA8B,MAAM,EAAE;UAAEN,GAAG,EAAE,0BAA0BjB,KAAK,CAACW;QAAvC;MAAtC,EADF,EAEE,KAAC,MAAD;QAAQ,KAAK,EAAC,OAAd;QAAsB,OAAO,EAAEK;MAA/B,EAFF,EAGGlB,yBAAyB,GAAG,KAAC,MAAD;QAAQ,KAAK,EAAC,MAAd;QAAqB,OAAO,EAAEqB;MAA9B,EAAH,GAAiDZ,SAH7E,EAIE,KAAC,MAAD;QAAQ,KAAK,EAAC,SAAd;QAAwB,OAAO,EAAE;UAAA,OAAMN,QAAQ,CAACM,SAAD,CAAd;QAAA;MAAjC,EAJF;IAAA,EADF;EAQD;;EAGD,OACE,MAAC,MAAD;IACE,KAAK,EAAEc,MAAM,CAACC,SADhB;IAAA,WAIE,KAAC,IAAD;MAAM,KAAK,EAAED,MAAM,CAACG,eAApB;MAAA,UACE,KAAC,MAAD;QACE,KAAK,EAAC,cADR;QAEE,OAAO,EAAEhB;MAFX;IADF,EAJF,EAUE,KAAC,SAAD;MAAW,KAAK,EAAC;IAAjB,EAVF;EAAA,EADF;AAeD;;AAED,IAAMa,MAAM,GAAGI,UAAU,CAACC,MAAX,CAAkB;EAC/BJ,SAAS,EAAE;IACTK,IAAI,EAAE,CADG;IAETC,UAAU,EAAE,QAFH;IAGTC,cAAc,EAAE;EAHP,CADoB;EAM/BL,eAAe,EAAE;IACfM,eAAe,EAAE,MADF;IAEfC,SAAS,EAAE;EAFI,CANc;EAU/BR,OAAO,EAAE;IACPQ,SAAS,EAAE,SADJ;IAEPJ,IAAI,EAAE;EAFC;AAVsB,CAAlB,CAAf;AAgBA,eAAejC,GAAf"},"metadata":{},"sourceType":"module"}