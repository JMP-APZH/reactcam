{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\nimport { useEffect, useRef, UseRef, useState } from 'react';\nimport \"./App.css\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction App() {\n  var cameraRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasCameraPermission = _useState2[0],\n      setHasCameraPermission = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasMediaLibraryPermission = _useState4[0],\n      setHasMediaLibraryPermission = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photo = _useState6[0],\n      setPhoto = _useState6[1];\n\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraPermission = yield Camera.requestCameraPermissionsAsync();\n      var mediaLibraryPermission = yield MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return _jsx(Text, {\n      children: \"Requesting permissions...\"\n    });\n  } else if (!hasCameraPermission) {\n    return _jsx(Text, {\n      children: \"Permission for camera not granted. Please change this in settings.\"\n    });\n  }\n\n  var takePic = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var options = {\n        quality: 1,\n        base64: true,\n        exif: false\n      };\n      var newPhoto = yield cameraRef.current.takePictureAsync(options);\n      setPhoto(newPhoto);\n    });\n\n    return function takePic() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  if (photo) {\n    var sharePic = function sharePic() {\n      shareAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    var savePhoto = function savePhoto() {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsx(Image, {\n        style: styles.preview,\n        source: {\n          uri: \"data:image/jpg;base64\" + photo.base64\n        }\n      }), _jsx(Button, {\n        title: \"Share\",\n        onPress: sharePic\n      }), hasMediaLibraryPermission ? _jsx(Button, {\n        title: \"Save\",\n        onPress: savePhoto\n      }) : undefined, _jsx(Button, {\n        title: \"Discard\",\n        onPress: function onPress() {\n          return setPhoto(undefined);\n        }\n      })]\n    });\n  }\n\n  return _jsxs(Camera, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.buttonContainer,\n      children: _jsx(Button, {\n        title: \"Take Picture\",\n        onPress: takePic\n      })\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    })]\n  });\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});\nexport default App;","map":{"version":3,"sources":["C:/Projects/ReactCam/reactcam/src/App.js"],"names":["StatusBar","Camera","shareAsync","MediaLibrary","useEffect","useRef","UseRef","useState","App","cameraRef","hasCameraPermission","setHasCameraPermission","hasMediaLibraryPermission","setHasMediaLibraryPermission","photo","setPhoto","cameraPermission","requestCameraPermissionsAsync","mediaLibraryPermission","requestPermissionsAsync","status","undefined","takePic","options","quality","base64","exif","newPhoto","current","takePictureAsync","sharePic","uri","then","savePhoto","saveToLibraryAsync","styles","container","preview","buttonContainer","StyleSheet","create","flex","alignItems","justifyContent","backgroundColor","alignSelf"],"mappings":"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","sourcesContent":["// import { StatusBar } from 'react-native';\nimport { StatusBar } from 'expo-status-bar';\nimport { StyleSheet, Text, View, SafeAreaView, Button, Image } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\n\nimport { useEffect, useRef, UseRef, useState } from 'react';\n\n// import logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n\n  let cameraRef = useRef();\n  const [hasCameraPermission, setHasCameraPermission] = useState();\n  const [hasMediaLibraryPermission, setHasMediaLibraryPermission] = useState();\n  const [photo, setPhoto] = useState();\n\n  useEffect(() => {\n    (async () => {\n      const cameraPermission = await Camera.requestCameraPermissionsAsync();\n      // const mediaLibraryPermission = await MediaLibrary.requestMediaLibraryPermissionsAsync();\n      const mediaLibraryPermission = await MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return <Text>Requesting permissions...</Text>\n  } else if (!hasCameraPermission) {\n    return <Text>Permission for camera not granted. Please change this in settings.</Text>\n  }\n\n  let takePic = async () => {\n    let options = {\n      quality: 1,\n      base64: true,\n      exif: false\n    };\n    let newPhoto = await cameraRef.current.takePictureAsync(options);\n    setPhoto(newPhoto);\n  };\n\n  if (photo) {\n    let sharePic = () => {\n      shareAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    let savePhoto = () => {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    return (\n      <SafeAreaView style={styles.container}>\n        <Image style={styles.preview} source={{ uri: \"data:image/jpg;base64\" + photo.base64 }} />\n        <Button title=\"Share\" onPress={sharePic} />\n        {hasMediaLibraryPermission ? <Button title=\"Save\" onPress={savePhoto} /> : undefined}\n        <Button title=\"Discard\" onPress={() => setPhoto(undefined)} />\n      </SafeAreaView>\n    );\n  }\n  \n\n  return (\n    <Camera \n      style={styles.container}\n    >\n\n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Take Picture\"\n          onPress={takePic}\n        />\n      </View>\n      <StatusBar style=\"auto\" />\n\n    </Camera>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}